# This model establishes the relationships between a 'connection' asset and
# the source and destination 'application' assets it refers to. Since a
# connection has two distinct links to applications (a source and a destination),
# this cannot be modeled using simple foreign keys in the CSV.
#
# Instead, we use `enrich_property` rules to perform a "join" on the graph.
# These rules create explicit, named relationships, which can then be traversed
# by the output templates.

origin_resource = "connections"

# Create a 'source_app' relation from a connection to its source application.
[[enrich_property]]
from_resource_type = "applications"
origin_key         = "source_app"
target_key         = "name"
relation_type      = "source_app"
reverse_relation   = false

# Create a 'dest_app' relation from a connection to its destination application.
[[enrich_property]]
from_resource_type = "applications"
origin_key         = "dest_app"
target_key         = "name"
relation_type      = "dest_app"
reverse_relation   = false
